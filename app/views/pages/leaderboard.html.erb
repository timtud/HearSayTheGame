<div class = "trumper">
  <%= cl_image_tag "trumper_zinp6o", height:400, crop:"scale" %>
</div>

<div class="swanye">
  <%= cl_image_tag "kanyer_inverted_vexyme", height:400, crop:"scale" %>
</div>

<div class="container text-center leaderboard">
  <h1>Leaderboard</h1>
   <div class="tabs">
    <a class="tab active" data-target="#alltime">
      <h3>All time</h3>
    </a>
    <a class="tab" data-target="#monthly">
      <h3>Monthly</h3>
    </a>
    <a class="tab" data-target="#weekly">
      <h3>Weekly</h3>
    </a>
      <a class="tab" data-target="#daily">
      <h3>Daily</h3>
    </a>
  </div>

  <div class=" text-center">
    <div class="tab-content board" id="alltime">
      <% board = User.top_players %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="thead">Rank</th>
            <th class="thead">Username</th>
            <th class="thead">Score</th>
          </tr>
        <% if user_signed_in? %>
            <tr>
              <% score = current_user.player_score %>
              <th class="self">#<%= board.find_index([score,current_user.email]) + 1 %></th>
              <th class="self" ><%= current_user.email %></th>
              <th class="self"><%= score %></th>
            </tr>
          </thead>
        <% end %>
        <tbody>
          <% board[0..100].each_with_index do |user, index| %>
            <tr>
              <% if user_signed_in? && current_user.email == user[1] %>
                <td class="info">#<%= index+1 %></td>
                <td class="info" ><%= user[1] %></td>
                <td class="info"><%= user[0] %></td>
              <% else %>
                <td>#<%= index+1 %></td>
                <td><%= user[1] %></td>
                <td><%= user[0] %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
    <div class="tab-content hidden board" id="monthly">
      <% board = User.top_players('month') %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="thead">Rank</th>
            <th class="thead">Username</th>
            <th class="thead">Score</th>
          </tr>
        <% if user_signed_in? %>
            <tr>
              <% score = current_user.player_score('month') %>
              <th class="self">#<%= board.find_index([score,current_user.email]) + 1 %></th>
              <th class="self" ><%= current_user.email %></th>
              <th class="self"><%= score %></th>
            </tr>
          </thead>
        <% end %>
        <tbody>
          <% board[0..100].each_with_index do |user, index| %>
            <tr>
              <% if user_signed_in? && current_user.email == user[1] %>
                <td class="info">#<%= index+1 %></td>
                <td class="info" ><%= user[1] %></td>
                <td class="info"><%= user[0] %></td>
              <% else %>
                <td>#<%= index+1 %></td>
                <td><%= user[1] %></td>
                <td><%= user[0] %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="tab-content hidden board" id="weekly">
      <% board = User.top_players('week') %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="thead">Rank</th>
            <th class="thead">Username</th>
            <th class="thead">Score</th>
          </tr>
        <% if user_signed_in? %>
            <tr>
              <% score = current_user.player_score("week") %>
              <th class="self">#<%= board.find_index([score,current_user.email]) + 1 %></th>
              <th class="self" ><%= current_user.email %></th>
              <th class="self"><%= score %></th>
            </tr>
          </thead>
        <% end %>
        <tbody>
          <% board[0..100].each_with_index do |user, index| %>
            <tr>
              <% if user_signed_in? && current_user.email == user[1] %>
                <td class="info">#<%= index+1 %></td>
                <td class="info" ><%= user[1] %></td>
                <td class="info"><%= user[0] %></td>
              <% else %>
                <td>#<%= index+1 %></td>
                <td><%= user[1] %></td>
                <td><%= user[0] %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="tab-content hidden board" id="daily">
      <% board = User.top_players('day') %>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="thead">Rank</th>
            <th class="thead">Username</th>
            <th class="thead">Score</th>
          </tr>
        <% if user_signed_in? %>
            <tr>
              <% score = current_user.player_score('day') %>
              <th class="self">#<%= board.find_index([score,current_user.email]) + 1 %></th>
              <th class="self" ><%= current_user.email %></th>
              <th class="self"><%= score %></th>
            </tr>
          </thead>
        <% end %>
        <tbody>
          <% board[0..100].each_with_index do |user, index| %>
            <tr>
              <% if user_signed_in? && current_user.email == user[1] %>
                <td class="info">#<%= index+1 %></td>
                <td class="info" ><%= user[1] %></td>
                <td class="info"><%= user[0] %></td>
              <% else %>
                <td>#<%= index+1 %></td>
                <td><%= user[1] %></td>
                <td><%= user[0] %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% content_for(:after_js) do  %>

<script>
$(function(){

  $(".tab").on("click", function(e){
    // Change active tab
    $(".tab").removeClass('active');
    $(this).addClass('active');
    // Hide all tab-content (use class="hidden")
    $(".tab-content").addClass('hidden');
    // Show target tab-content (use class="hidden")
    $($(this).data('target')).removeClass('hidden');
  });

});
</script>

<% end %>
